\usepackage{pgffor,environ}

\makeatletter
\NewEnviron{kite}[1]{%
  \foreach \Title in {#1} {%
    \expandafter\ifcsname c@\Title\endcsname\else% If a counter doesn't exist...
      \newcounter{\Title}%                         ... create it
    \fi
    \stepcounter{\Title}% Another element should be added to particular list
    \edef\x{% Add element to particular list
      \noexpand\expandafter\noexpand\protected@xdef
        \noexpand\csname \Title @\csname the\Title\endcsname\noexpand\endcsname{\BODY}}\x

  }
}
\makeatother

\newcommand{\processfile}[1]{\input{#1}}

\newcommand{\printlist}[2][itemize]{%
  \expandafter\let\expandafter\listend\csname the#2\endcsname
  \begin{#1}
    \foreach \curitem in {1,...,\listend} {
      \item \expandafter\csname #2@\curitem\endcsname
    }
  \end{#1}
}
